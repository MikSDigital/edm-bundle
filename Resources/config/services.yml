# Resources/config/services.yml
parameters:

    webeweb.bundle.edmbundle.directory: "%kernel.root_dir%/data/edm"

services:

    webeweb.bundle.edmbundle.form.type.document.new:
        class:     WBW\Bundle\EDMBundle\Form\Type\Document\NewDocumentType
        arguments: ["@doctrine.orm.entity_manager"]
        tags:
            - { name: form.type }

    webeweb.bundle.edmbundle.manager.storage:
        class:     WBW\Bundle\EDMBundle\Manager\StorageManager
        arguments: ["@doctrine.orm.entity_manager", "%webeweb.bundle.edmbundle.directory%"]
        public:    true
        tags:
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.directory.delete,   method: onDeletedDirectory }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.directory.download, method: onDownloadedDocument }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.directory.edit,     method: onEditedDirectory }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.directory.move,     method: onMovedDocument }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.directory.new,      method: onNewDirectory }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.directory.open,     method: onOpenDirectory }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.document.delete,    method: onDeletedDocument }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.document.download,  method: onDonwloadedDocument }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.document.edit,      method: onEditedDocument }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.document.move,      method: onMovedDocument }
            - { name: kernel.event_listener, event: webeweb.bundle.edmbundle.event.document.upload,    method: onUploadedDocument }

    webeweb.bundle.edmbundle.twig.extension.edm:
        class:     WBW\Bundle\EDMBundle\Twig\Extension\EDMTwigExtension
        arguments: ["@router", "@translator", "@webeweb.bundle.edmbundle.manager.storage"]
        tags:
            - { name: twig.extension }
